0.27

注：もしゲームが動かないときは、.CFGファイルの消去を試してみて下さい。

MAMEリリースのライセンスについて、言いたいことがたくさんあります。
GPLは適応できないため外しました。新ルールはreadme.txtをみて下さい。

今回のリリースでの新規サポート(順不同)：
ゼビウス
スターウォーズ
バブルボブル
エリミネーター
スペースフューリー
スタートレック
タックスキャン
ゼクター
Super Bagman
ウォーロード
10ヤードファイト
ボスコニアン
ディグダグ II
パック&パル
ソンソン
Loco-Motion / ガッタンゴットン
ブループリント
スナップジャック
コスミックアベンジャー
Eggs / スクランブルエッグ
... プラス、ここに書かれていない多くの互換版


プログラム：
-「バンガード」のエネルギーシールドが動くようになりました。
 「ニブラー」「バンガード」「ファンタジー」のスピードはどうでしょうか? 
  速過ぎませんか?

-「GnG / 魔界村」の別グラフィック版(シールドの代わりに十字架)をサポート。

- Pokeyの乱数生成について貴重な情報がEric Smith氏、Hedley Rainnie氏、Sean 
  Trowbridge氏らから寄せられ、「センチピード」の問題(18クレジットで始まる)と
 「テンペスト」のバグ(レベル13の後固まる)が修正されました。

- Virtu-Al氏とPeter Clare氏により、「カーニバル」の色が100%正確になりました。

- Mirko Buffoni氏とTatsuyuki Satoh氏が「ゼビウス」の予備ドライバを提供してくれま
  した。

- Al Kossow氏とBrad Oliver氏がSega製ベクターゲーム(「エリミネーター」
  「スペースフューリー」「スタートレック」「タックスキャン」「ゼクター」)のドライ
  バを提供してくれました。
  中には、サンプルで一部サウンド(ボイス)が鳴るものもあります。

- Jarek Burczynski氏が「バッグマン」の色改善と「Super Bagman」のサポートを追加。

- Andrew Scott氏が「プレアデス」のサウンドを改善。

- Virtu-Al氏により、「Rescue」の色が正確に。

- Lee Taylor氏(nxsl2819@defender.demon.co.uk)とJohn Clegg氏が「ウォーロード」の
  ドライバを提供してくれました。

- Andrea Fregoli氏がキーボードとジョイスティックの設定メニューが画面に収まらない
  ときにスクロールするようにしてくれました。

- Andrew Scott氏とRobert R氏.、Anschuetz II氏らが「ギャラクシアン」とそのクロー
  ンのサウンドを修正してくれました。バックのノイズが鳴るようになりましたが、
  ショット音にはまだサンプルが必要です。この変更は、同じサウンドルーチンを使用す
  る他のゲームでも効果があります。

- Brian Levine氏の自由に使えるRockulatorのおかげで、Andrew Scott氏が「バンガード」
  にサウンドサポートを追加できました。

- Mike Coates氏が「Gorf」をさらに改良しました。(いくらか)プレイ可能です。

- Lee Taylor氏とJohn Clegg氏が「10ヤードファイト」の予備サポートをしてくれました。

- Martin Scragg氏が「ボスコニアン」のサポートを追加。

- Aaron Giles氏が彼の「スーパーパックマン」と「マッピー」ドライバを大幅に改良し
  ました：
  -「ディグダグ2」と「パック＆パル」のサポート
  - これらの全ドライバでハイスコアサポート
  - 100%の色再現とサウンドサンプル(「スーパーパックマン」のサイレン音は少しつま
    ずきますが私もjrok氏もどうしてか分かりません。サンプルデータは*正確*です)
  - サウンド再生周波数の向上(いくつかの高周波数部分が欠けていました!)
  - 実機に忠実な周波数計算(jrok氏に感謝!)
  - パレットのハックを全て削除；全部クリーンです
  - 速度用のループを最適化
  - 表示順位の高いキャラクタ込みで画面を正確に表示

- John Butler氏とAaron Giles氏が「ミリピード」のトラックボールサポートとサウンド
  を修正。

- Steve Baines氏が、Frank Palazzolo氏とBrad Oliver氏の協力で「スターウォーズ」を
  サポート。プレイ可能ですが、完璧にはほど遠い状態です。さらにサウンドも予備的に
  サポートしています(がゲーム速度はかなり落ちます)。

- Bernd Wiebelt氏がベクターゲーム用オプション-vgを追加しました。これは与えられた
  画面解像度にベクターゲームを適応させます(デフォルトは800x600です)。

- Atari製ベクターゲームで多くの作業追加(Brad Oliver氏 & Bernd Wiebelt氏)
  - かなり多くのバグ狩り。
  - Aaron Giles氏のおかげで、スケーリングが正常になり、ベクターCPUのサイクルカウ
    ントも可能になりました。Aaron氏はさらにSega製のベクターゲームのスケーリング
    も修正しました
  -「テンペスト」が13面以降でクラッシュが修正され、色の改善(カラーRAMエミュレー
    ション)、さらに全体的な速度が上がりました。
  -「Black Widow」と「スターウォーズ」以外のゲームでハイスコアセーブサポート。
  -「テンペスト」と「レッドバロン」でトラックボールサポート。
   「レッドバロン」では起動時にアナログジョイスティックの調整が行われるので、4方
    向全てに飛ぶ前に、ジョイスティックを少し動かさなくてはいけません。
    baloo@kaiwan.com氏の提案に感謝。
  - Mauro Minenna氏が「バトルゾーン」をジョイスティック一本でプレイできるように
    しました。
  - ゲーム解像度の変更。DOS上ではtweak VGAモードを使用します。
    それぞれゲームの*.CFGと.HIファイルを消去しないと、正常に動作しません。

- Mike Coates氏が「カーニバル」にサンプル使用の部分的サウンドサポートを追加。

-「バブルボブル」をサポート。Chris Moore氏(chris@aethos.co.uk)提供。

-「ソンソン」をサポート(Roberto Ventura氏に捧ぐ! ;)

- Richard Davies氏により「エグゼドエグゼス」を予備サポート。
  Paul Swan氏のおかげで、色は100%正確です。
  あとすること：どこにタイルRAMが配置されてどのように動作するか、さらにバンクさ
  れたROMがコードかデータだけを含むのかを見つけ出す。ゲームの構造は他のCapcom
  ゲームと似ています。

- Mirko Buffoni氏とTatsuyuki Satoh氏が「スターフォース」サウンドエミュレーション
  を追加。

- Mike Coates氏が「Wizard of Wor」のドライバを整理してキーとジョイスティックの再
  定義機能と、「シーウルフ2」にプレイヤー2のサポートを追加。

- Fabrice Frances氏がGottlieb製全ゲームドライバにハイスコアサポートを追加。

- Ray Giarratana氏が「ミサイルコマンド」にトラックボールサポートを追加。

-「ミスターDo! VS ユニコーン」(「Do's Castle」の初期版)のサポート追加。Lee Taylor氏の情
  報に感謝)

-「ツタンカーム」がサウンドサポート。

-「エレベーターアクション」のサウンドが完璧になりました。

- Marc Vergoosen氏により「ザクソン」の色が改善。

- Jarek Burczynskiがusrintrf.cのshowcharset()を変更。これで画面に収まりきらない
  キャラクタセットをスクロールするのにPGUPとPGDNキーを使用できます。


ソース：
- Brad Oliver氏が新たにsndhrdw/pokyintf.cファイルを書きました。これは、pokey.c
  用のほとんどのpokeyインターフェースを扱います。milliped_sh_start()などを呼び出
  すより、pokeyx_sh_start()を使って下さい(xはpokeyの数です)。これは、pokeyのカウ
  ントのトラックを保持して、適切なクリッピングを使用します。pokey3つは利用可能な
  組み合わせかどうか確信が持てないため、pokey3_sh_start()のようなルーチンは用意
  していません。
 
- Christopher Kirmse氏がMAMEをWin32に移植しました。
  DOS版と同じソースツリーからコンパイルしています：コンパイルにはVisualC++5で
  nmake -fmakefile.w32としてmame32.exeを作成しています。Win32用のSEALオーディオ
  ライブラリも必要です。

- SN76496エミュレーションを変更(SN76496UpdateB関数を2チップ8チャンネルPCMサウン
  ドをエミュレートするために追加)。また、COMMON.CにZ80PIOとZ80CTCエミュレータを
  追加して'TRANSPARENCY_PEN'と'TRANSPARENCY_COLOR'モードのスピードアップ(XY両方
  向スクロールゲーム用)。これらはTatsuyuki Satoh氏によるものです。

- Atari製ベクターゲーム用にEAROMの汎用ルーチンを追加。src/machine/atari.cと
  src/machine/atari.hにあります。

- Bernd Wiebelt氏が6502のBCD-エミュレーションを修正が完了したはずだとしています。
  最低でも「テンペスト」で、ショットを押さなくてもゲームがスタートするようになっ
  て、本物のフィーリング(broken X/Y モニタ)はあります。


以下の変更はNicola Salmoria氏によるものです：

プログラム：
- オーディオストリーミングを使用する全ゲーム(例えば、8910やPokeyサウンドチップを
  使うもの)でも、スピードスロットリング(F10)をオフにできるようになりました。

-「Loco-Motion / ガッタンゴットン」をサポート。

-「ブループリント」をサポート。

- F. Kurokawa氏により「スナップジャック」「コスミックアベンジャー」の予備サポー
  ト。レディバグドライバ上で動作。

- いくつかのゲームのクラッシュと、GUSとAWE32の互換性問題を解消しました。
  しかし、AWE32を使っている場合はまだ問題があるので、SoundBlasterを使って下さい。
  AWE32だと全然オリジナルと違ってしまいます(しかも遅いです)。

-「ギャラガ」で、33面以降の星のスクロールスピードを修正。

- メニュー表示時にESCキーを押したとき、終了しないで、一つ前のメニューに戻るよう
  修正。

- 8910サウンドチップインターフェースを毎秒60以上で動作するように変更。また、サン
  プル再生周波数も44.1kHzに格上げしました。このおかげで、音質が劇的に向上して、
 「ジャイラス」や「プーヤン」などで、かなり感激します。その代償に、速度が低下し
  ます。さらに悪いことに、いくつかの最適化部分を(願わくば一時的に)削除しなければ
  いけませんでした。そのためこれらのゲームでは、以前の低速システムでは正常に動作
  しないかもしれません。

-「ドンキーコング」の色改善。もうほとんど本物でしょ?

-「スクランブルエッグ / Eggs」の予備ドライバ追加。

-「ポパイ」が速度を30fpsに修正。

- デジタルオーディオチャンネルを8から16に増加しました。これで、「ミスターDo!」系
  ゲーム(Castle, Unicorns, Wild Ride, Run Run, Kick Rider)でボイスが出るようにな
  りました。

- Gary Walton氏により「ペンゴ」の速度が実機に近くなりました。

- プロテクトはずし版の「ペンタ」とpengopopのサポートをやめました。
  これらはハック物で、本物から吸い出したものではないからです。*オリジナル*の
  *プロテクトされた*バージョンを代わりにサポートしています。実行結果は同じですが、
  唯一の違いはプロテクトされた本物の基板から吸い出したものであるということです。
  ゲーム名は以下のようになりました：
  pengo   "ポップコーン"BGMのオリジナル版
  pengoa  音楽の違う初期版。画面描画が高速
  penta   ペンタという海賊版

-「エレベーターアクション」「ジャングルキング」「ワイルドウエスタン」で、同じビ
  デオハードを使用しています(taito.c)。

- 起動前にROMのチェックサムを確かめます。もしチェックサムが合わないときは、画面
  に警告メッセージと、正しい値を表示します。リターンキーを押すと実行が再開されま
  す。全てのゲームでサポートしているわけではありませんが、ほとんどで動作します。

- ROM交換版をいくつかサポート：ckonga, galaganm, gallag, bzone2, asteroi2,
  panica, pacmanjp

- あなたを困らせるような、いくつかのROMであちこち名前を変更 ;-)

- 多くのマイナーフィクスと改良。

-「ムーンクレスタ」の悪名高い2つのスプライトバンクを交換。

ソース：
- 超重要：
  osd_obtain_pen()がペンを連続して返さなくなりました。これで、MSDOSドライバ開発
  者が確実にMachine->pens[]の存在を知ることができ、適切に使えることを保証します。
  これを行わないドライバでは色が化けるかもしれません。

- readinputport()が各フレーム毎に一回だけキーボードをスキャンするように修正して、
  全てより効率よく扱えるようにしました。以前のものよりもかなり速くなっています -
  VBlankのポートを連続してプールするようなゲームで便利です。

- generic_vh_start()で、videoram_sizeが初期化されたか失敗したかをチェックするよ
  うになりました。

- TRANSPARENCY_COLORとTRANSPARENCY_THROUGHをdrawgfx()で使用するとき、引数は
  再マップされたペン番号の代わりにペンコードにしなければいけません。例えば、
  Machine->background_pen (= machine->pens[0])のかわりに、単に0とします。
  またMachineからbackground_penフィールドを消去しました：Machine->pens[0]を代わ
  りに使用して下さい。

- ROM_LOAD()マクロに4つのパラメータが必要になり、最後の一つはチェックサムになり
  ます。
  以前のソースから、すぐにアップデートできるように(一時的に)ROM_OBSOLETELOAD()を
  使えますが、チェックサムの追加は簡単(警告メッセージからカット&ペーストするだけ)
  なので、早めに変更をした方がよいでしょう。

- ROM_RELOAD()を追加。これは異なったアドレスにある以前のROMをリロードします
  (6502ゲームで、FFFxでreset/irq vectorsが必要なゲームで便利です)。

- common.cに新関数printromlist()を追加。loadroms()とmame.cで使用 (-listroms用)。

- ドライバがバンクスイッチングを実行するためにRAMとROMのポインタを修正できるよう
  になりました。「バブルボブル」で使用します。
  注意：この機能を使うときは、RAMアクセスのために通常のMRA_RAMとMWA_RAMのメモリ
  フックを使用することは出来ません。

- InputPortsが自動的にVBlank bitsを扱えるようになりました。カスタムモードについ
  て書く必要はもうありません。「レディバグ」「カーニバル」「ノーティーボーイ」
  「フェニックス」「ミステリアスストーンズ」でこの機能を使っています。その他のド
  ライバもこれを使用するようにアップデートする必要があります。
  LADYBUG\LADYBUG.DSWとLADYBUG\LADYBUG.CFGを消去しないとゲームは正常に動作しま
  せん。

- cpuintrf.cでサポートされた新関数：
  cpu_getfcount()：現在の表示フレームの終りまでのCPUサイクル数を返す。
       (次の割り込みハンドラのコールまでのCPUサイクル数を返すcpu_geticount()と
        逆の働きをします。)
  cpu_getiloops()：割り込みハンドラが表示フレームの終り前に呼び出される回数を返
       す。(割り込みハンドラで便利です。)
  cpu_gettotalcycles()：CPUがリセットされてからパスされた合計CPUサイクル数を返す。
  ignore_interrupt()：interrupt()とnmi_interrupt()と一緒に使用。CPU特有の割り込
        みの確認せずに、CPUから独立した割り込みハンドラを使用できます。
